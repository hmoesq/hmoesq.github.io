(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-circle-index"],{3254:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".scroll-view_H[data-v-584e7066]{white-space:nowrap;height:%?172?%}.page-content[data-v-584e7066]{background-color:#f6f6f6;height:100%}.t-top[data-v-584e7066]{justify-content:space-between;font-size:%?28?%;margin-bottom:%?24?%;padding-top:%?24?%}.t-item[data-v-584e7066]:nth-child(1){margin-left:%?24?%}.t-item[data-v-584e7066]{width:%?132?%;height:%?172?%;display:inline-block;background:#f5f6f7;position:relative;border-radius:%?8?%}.t-item + .t-item[data-v-584e7066]{margin-left:%?24?%}.t-list[data-v-584e7066]{margin-bottom:%?30?%}.po-topic[data-v-584e7066]{margin:%?20?% 0;padding:%?20?% %?32?%;background-color:#fff}.p-t .avatar[data-v-584e7066]{width:%?70?%;height:%?70?%;margin-right:%?16?%;border-radius:100%;display:block}.p-area[data-v-584e7066]{border:1px solid #e8e8e8;width:100%;height:%?68?%;border-radius:%?8?%;line-height:%?68?%;font-size:%?28?%;color:#c0cade;padding-left:%?16?%}.dot[data-v-584e7066]{margin:0 %?10?%}.count[data-v-584e7066]{position:absolute;right:%?0?%;top:%?0?%;background-color:#fff;z-index:3;font-size:%?22?%;height:%?30?%;line-height:%?30?%;padding:0 %?16?%;color:#7d7d7d;border-bottom-left-radius:%?20?%}.c-info[data-v-584e7066]{position:absolute;height:100%;width:100%;left:0;top:0;background:linear-gradient(180deg,transparent,rgba(0,0,0,.5));white-space:break-spaces;z-index:3;color:#fff}.c-info-in[data-v-584e7066]{position:absolute;bottom:0;padding:%?16?%;width:100%;box-sizing:border-box}.t-m[data-v-584e7066]{font-size:%?20?%;font-weight:700;display:flex;opacity:.7}.t-n[data-v-584e7066]{font-size:%?20?%;font-weight:700;margin-bottom:%?8?%}.t-i[data-v-584e7066]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}.say .b2font[data-v-584e7066]{color:#4caf50}.ask .b2font[data-v-584e7066]{color:#f35}.guess .b2font[data-v-584e7066]{color:#ffa41b}.vote .b2font[data-v-584e7066]{color:#1a85ff}.p-tools[data-v-584e7066]{margin-top:%?24?%;font-size:%?28?%}.p-tools .flex-center[data-v-584e7066]{width:25%;justify-content:center}.p-tools .flex-center + .flex-center[data-v-584e7066]{border-left:1px solid #e8e8e8}.p-tools .b2font[data-v-584e7066]{margin-right:%?8?%;font-weight:400}",""]),t.exports=e},"3c93":function(t,e,a){"use strict";var i=a("b4fc"),o=a.n(i);o.a},8573:function(t,e,a){"use strict";(function(t){a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("a434"),a("3c65"),a("99af");var i={data:function(){return{terms:[],termtype:"hot",topics:{data:[]},loadingStatus:!0,loadmore:"waiting",paged:1,loadLocked:!1,creditData:{},reloadIndex:0,open:{id:0,index:0,can:!1,type:"post"}}},onReachBottom:function(){this.getTopics()},onPullDownRefresh:function(){this.paged=1,this.getTopics()},onLoad:function(){var t=this;uni.$on("reloadTopicData",(function(e){t.reloadData(e)})),this.loadingStatus&&this.getTopics()},created:function(){var t=this;uni.$on("getTopicData",(function(e){t.addNewTopic(e)}))},onShareAppMessage:function(t){return{title:this.opt.mNames.circle_name,path:"/pages/circle/index"}},onReady:function(){uni.setNavigationBarTitle({title:this.opt.mNames.circle_name})},onUnload:function(){uni.$off("getTopicData"),uni.$off("deleteTopic"),uni.$off("reloadTopicData")},onShow:function(){!1!==this.reflashTopic&&(uni.showLoading({title:"加载中..."}),this.reloadData(this.reflashTopic)),uni.setStorageSync("historyUrl",this.currentUrl())},computed:{userData:function(){return this.$store.state.userData},token:function(){return this.$store.state.token},opt:function(){return this.$store.state.opt},reflashTopic:function(){return this.$store.state.reflashTopic}},methods:{resetJubao:function(){this.open={id:0,index:0,i:"",can:!1}},openJubao:function(e,a,i){t.log(e),this.open.id=e,this.open.index=a,this.open.can=i,this.$refs.jubao.open()},creditpay:function(t){this.reloadIndex=t,this.creditData={id:this.topics.data.data[t].topic_id,thumb:this.topics.data.data[t].attachment.image[0]?this.topics.data.data[t].attachment.image[0].small_thumb:"",title:this.topics.data.data[t].title?this.topics.data.data[t].title:this.topics.data.data[t].content,order_price:this.topics.data.data[t].allow_read.data,order_type:"circle_hidden_content_pay",count:1,email:""},this.$refs.creditpay.open()},closePopup:function(){this.reloadData(this.reloadIndex)},reloadData:function(t){var e=this;uni.request({method:"post",url:this.$store.state.restUrlNormal+"getDataByTopicId",header:this.$store.state.headerToken,data:{topic_id:this.topics.data.data[t].topic_id},success:function(a){"403"!=a.statusCode&&e.$set(e.topics.data.data,t,a.data),e.$store.state.reflash=!1,e.$store.state.reflashTopic=!1,uni.hideLoading()}})},deleteTopicAc:function(){t.log(this.open.id),this.open.id&&(t.log(this.open.id),this.$refs.topiclist.deleteTopic(this.open.index,this.open.id))},deleteTopic:function(t){this.$refs.jubao.close(),this.topics.data.data.splice(t,1)},updateData:function(t,e,a){var i=this;"vote"==e&&t&&t.then((function(t){i.$set(i.topics.data.data[a].meta.vote,"up",i.topics.data.data[a].meta.vote.up+t.up),i.$set(i.topics.data.data[a].meta.vote,"down",i.topics.data.data[a].meta.vote.down+t.down),t.up>0?i.$set(i.topics.data.data[a].meta.vote,"isset_up",!0):i.$set(i.topics.data.data[a].meta.vote,"isset_up",!1),t.down>0?i.$set(i.topics.data.data[a].meta.vote,"isset_down",!0):i.$set(i.topics.data.data[a].meta.vote,"isset_down",!1),i.$set(i.topics.data.data[a].meta.vote,"locked",!1)}))},addNewTopic:function(t){this.topics.data.data.unshift(t)},poTopic:function(){this.token?this.go("/circle/po-topic"):this.go("/pages/global/login")},getTopics:function(){var t=this;this.loadLocked||(this.paged>1&&(this.loadmore=!0),uni.request({method:"post",url:this.$store.state.restUrl+"getCircleIndex",header:this.$store.state.headerToken,data:{paged:this.paged,type:"all",role:"all",file:"all"},success:function(e){403!=e.statusCode&&(1==t.paged?(t.terms=e.data.terms,t.topics.data=e.data.topics,t.termtype=e.data.term_type,t.topics.hidden=!0,t.loadingStatus=!1):e.data.topics.data.length>0?t.topics.data.data=t.topics.data.data.concat(e.data.topics.data):(t.loadLocked=!0,t.loadmore=!1),t.paged++,uni.stopPullDownRefresh())}}))}}};e.default=i}).call(this,a("5a52")["default"])},"8cb6":function(t,e,a){"use strict";a.r(e);var i=a("ccf1"),o=a("de3f");for(var s in o)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(s);a("3c93");var n=a("f0c5"),c=Object(n["a"])(o["default"],i["b"],i["c"],!1,null,"584e7066",null,!1,i["a"],void 0);e["default"]=c.exports},b4fc:function(t,e,a){var i=a("3254");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("79f12ed7",i,!0,{sourceMap:!1,shadowMode:!1})},ccf1:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"page-content circle-index"},[a("v-uni-view",{staticClass:"circle-term"},[a("v-uni-view",{staticClass:"t-top flex-center b2mg"},["hot"==t.termtype?a("v-uni-view",[t._v("热门"+t._s(t.opt.mNames.circle_name))]):a("v-uni-view",[t._v("我加入的"+t._s(t.opt.mNames.circle_name))]),a("v-uni-view",{staticClass:"more-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.go("/circle/all-circle")}}},[t._v("查看更多"),a("b2font",{attrs:{type:"b2arrow-right-s-line",size:"30"}})],1)],1),a("v-uni-view",{staticClass:"t-list flex-center"},[a("v-uni-scroll-view",{staticClass:"scroll-view_H",attrs:{"scroll-x":"true","scroll-left":"0"}},t._l(t.terms,(function(e,i){return a("v-uni-view",{key:i,staticClass:"t-l-l t-item b2radius",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.go("/circle/category?id="+e.id)}}},[a("v-uni-view",{staticClass:"count bold"},[t._v(t._s(t.nFormatter(e.topic_count)))]),a("v-uni-view",{staticClass:"c-info"},[a("v-uni-view",{staticClass:"c-info-in"},[a("v-uni-text",{staticClass:"t-n lin-1 lin-2",domProps:{textContent:t._s(e.name)}}),a("v-uni-view",{staticClass:"t-m"},[a("v-uni-text",[t._v(t._s(t.opt.mNames.circle_member)+" "+t._s(t.nFormatter(e.user_count)))])],1)],1)],1),a("v-uni-image",{staticClass:"t-i b2radius b2img",attrs:{src:e.icon,mode:"aspectFill"}})],1)})),1)],1)],1),a("v-uni-view",{staticClass:"po-topic",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.poTopic.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"p-t flex-center"},[t.userData.avatar?a("v-uni-view",[a("v-uni-image",{staticClass:"avatar b2img",attrs:{src:t.userData.avatar,mode:"aspectFill"}})],1):a("v-uni-view",[a("v-uni-image",{staticClass:"avatar b2img",attrs:{src:"/static/default-avatar.png",mode:"aspectFill"}})],1),a("v-uni-view",{staticClass:"p-area"},[t._v("分享点新鲜事...")])],1),a("v-uni-view",{staticClass:"p-tools flex-center"},[a("v-uni-view",{staticClass:"say flex-center"},[a("b2font",{attrs:{type:"b2image-fill",size:"40"}}),a("v-uni-text",{staticClass:"bold-light"},[t._v("图片")])],1),a("v-uni-view",{staticClass:"ask flex-center"},[a("b2font",{attrs:{type:"b2movie-fill",size:"40"}}),a("v-uni-text",{staticClass:"bold-light"},[t._v("视频")])],1),a("v-uni-view",{staticClass:"vote flex-center"},[a("b2font",{attrs:{type:"b2bar-chart-fill",size:"40"}}),a("v-uni-text",{staticClass:"bold-light"},[t._v("投票")])],1),a("v-uni-view",{staticClass:"guess flex-center"},[a("b2font",{attrs:{type:"b2heart-pulse-line",size:"40"}}),a("v-uni-text",{staticClass:"bold-light"},[t._v("你猜")])],1)],1)],1),a("v-uni-view",[a("b2topic",{ref:"topiclist",attrs:{list:t.topics,vtype:"image"},on:{update:function(e){arguments[0]=e=t.$handleEvent(e),t.updateData.apply(void 0,arguments)},deleteTopic:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteTopic.apply(void 0,arguments)},creditpay:function(e){arguments[0]=e=t.$handleEvent(e),t.creditpay.apply(void 0,arguments)},openJubao:function(e){arguments[0]=e=t.$handleEvent(e),t.openJubao.apply(void 0,arguments)}}}),a("b2bottom",{attrs:{loadmore:t.loadmore}})],1),a("b2creditPay",{ref:"creditpay",staticClass:"creditpay",attrs:{data:t.creditData},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.closePopup.apply(void 0,arguments)}}}),a("b2jubao",{ref:"jubao",attrs:{type:"topic",data:t.open},on:{reset:function(e){arguments[0]=e=t.$handleEvent(e),t.resetJubao.apply(void 0,arguments)},deleteComment:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteTopicAc.apply(void 0,arguments)}}})],1)},o=[]},de3f:function(t,e,a){"use strict";a.r(e);var i=a("8573"),o=a.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=o.a}}]);