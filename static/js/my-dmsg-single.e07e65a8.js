(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["my-dmsg-single"],{"0973":function(t,a,e){"use strict";e("7a82"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,e("99af");var n={data:function(){return{list:[],cursor:0,focus:!1,locked:!1,data:{paged:1,userid:0},content:"",loadingStatus:!0,loadmore:"waiting",polocked:!1}},onLoad:function(t){t.id&&(this.data.userid=t.id,this.getData())},onReachBottom:function(){this.getData()},computed:{userData:function(){return this.$store.state.userData}},methods:{submit:function(){var t=this;this.polocked||(this.polocked=!0,uni.request({method:"post",url:this.$store.state.restUrlNormal+"sendDirectmessage",data:{user_id:this.data.userid,content:this.content},header:this.$store.state.headerToken,success:function(a){403==a.statusCode?uni.showToast({title:a.data.message,icon:"none"}):t.list.data=t.list.data.concat({content:t.content,type:"from",_date:t.showtime(),from:{avatar:t.userData.avatar,name:t.userData.name}}),t.content="",t.polocked=!1}}))},getData:function(){var t=this;this.locked||(this.locked=!0,this.data.paged>1&&(this.loadmore=!0),uni.request({method:"post",url:this.$store.state.restUrlNormal+"getMyDirectmessageList",data:this.data,header:this.$store.state.headerToken,success:function(a){if(1==t.data.paged){if(!(a.data.data.length>0))return t.list="empty",t.locked=!0,void(t.loadingStatus=!1);t.list=a.data,t.loadingStatus=!1,t.locked=!1}else a.data.data.length>0?(t.list.data=t.list.data.concat(a.data.data),t.locked=!1):(t.locked=!0,t.loadmore=!1);t.data.paged++}}))}}};a.default=n},"1acf":function(t,a,e){var n=e("9922");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=e("4f06").default;i("e8b3c152",n,!0,{sourceMap:!1,shadowMode:!1})},"3a59":function(t,a,e){"use strict";e.r(a);var n=e("c38b"),i=e("95a7");for(var s in i)["default"].indexOf(s)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(s);e("f235");var o=e("f0c5"),d=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"6c35d91e",null,!1,n["a"],void 0);a["default"]=d.exports},"95a7":function(t,a,e){"use strict";e.r(a);var n=e("0973"),i=e.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(s);a["default"]=i.a},9922:function(t,a,e){var n=e("24fb");a=n(!1),a.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.dtitle[data-v-6c35d91e]{padding-bottom:%?20?%;border-bottom:%?2?% solid #f5f6f7}.dsingle-list[data-v-6c35d91e]{display:flex;flex-flow:column}.dsingle-list .dmsg-item[data-v-6c35d91e]{display:flex;margin-bottom:%?40?%}.dsingle-list .avatar[data-v-6c35d91e]{display:block;min-width:%?60?%}.dsingle-list .from[data-v-6c35d91e]{align-self:flex-end;flex-direction:row-reverse}.dsingle-list .from .avatar[data-v-6c35d91e]{margin-right:0;margin-left:%?20?%}.dsingle-list .from .ddate[data-v-6c35d91e]{text-align:right;padding-right:%?10?%;padding-left:0}.dsingle-list .from .dcontent[data-v-6c35d91e]{background:#95ec69;margin-left:%?80?%;margin-right:0}.dsingle-list .dcontent[data-v-6c35d91e]{background-color:#f5f6f7;padding:%?14?% %?20?%;border-radius:%?10?%;margin-right:%?80?%}.dsingle-list .ddate[data-v-6c35d91e]{margin-top:%?6?%;padding-left:%?10?%}.comment-textarea[data-v-6c35d91e]{padding:%?24?%;padding-bottom:calc(var(--window-bottom) + 24px);padding-bottom:calc(constant(safe-area-inset-bottom) + 24px);\r\n  /*兼容 IOS<11.2*/padding-bottom:calc(env(safe-area-inset-bottom) + 24px);\r\n  /*兼容 IOS>11.2*/background-color:#fff;position:fixed;left:0;z-index:999;bottom:0;background:#fff;border-top:%?2?% solid #f5f6f7;align-items:flex-end}.comment-textarea .comment-textarea-input[data-v-6c35d91e]{background-color:#fff;border:0;display:block;min-height:%?70?%;font-size:%?28?%;font-weight:400;flex:1}.sub-button[data-v-6c35d91e]{display:block}.avatar[data-v-6c35d91e]{width:%?60?%;height:%?60?%;margin-right:%?20?%;border-radius:%?10?%}uni-page-body[data-v-6c35d91e]{height:100%!important;background:#fff}body.?%PAGE?%[data-v-6c35d91e]{background:#fff}.dmsg-content[data-v-6c35d91e]{padding-bottom:calc(var(--window-bottom) + 60px);padding-bottom:calc(constant(safe-area-inset-bottom) + 60px);\r\n  /*兼容 IOS<11.2*/padding-bottom:calc(env(safe-area-inset-bottom) + 60px)\r\n  /*兼容 IOS>11.2*/}.dmsg-page[data-v-6c35d91e]{padding:%?32?%}.dmsg-page[data-v-6c35d91e]  .box{padding:0}',""]),t.exports=a},c38b:function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return i})),e.d(a,"a",(function(){}));var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"dmsg-page"},[t.loadingStatus?e("v-uni-view",[t.loadingStatus?e("b2Loading",{attrs:{status:t.loadingStatus}}):t._e()],1):"empty"==t.list?e("v-uni-view",{staticClass:"comment-empty page-empty"},[e("v-uni-view",[e("b2font",{attrs:{type:"b224gl-starEmpty",size:"100",color:"#efefef"}})],1),e("v-uni-view",{staticClass:"empty-text"},[t._v("没有往来私信")])],1):e("v-uni-view",{staticClass:"dmsg-content"},[e("v-uni-view",{staticClass:"dsingle"},[e("v-uni-view",{staticClass:"fs13 dtitle mg-b bold"},[t._v("您与"),e("v-uni-text",{staticClass:"b2color"},[t._v(t._s(t.list.data[0].from.name))]),t._v("有"),e("v-uni-text",{staticClass:"b2color"},[t._v(t._s(t.list.count))]),t._v("条对话")],1)],1),e("v-uni-view",{staticClass:"dsingle-list"},t._l(t.list.data,(function(a,n){return e("v-uni-view",{key:n,class:a.type+" dmsg-item"},[e("v-uni-image",{staticClass:"avatar",attrs:{src:a.from.avatar}}),e("v-uni-view",{staticClass:"fs14 dcontent-box"},[e("v-uni-view",{staticClass:"dcontent"},[t._v(t._s(t.b2GetInnerText(a.content)))]),e("v-uni-view",{staticClass:"fs10 ddate gray"},[t._v(t._s(t.timeAgo(a._date)))])],1)],1)})),1)],1),e("v-uni-view",{staticClass:"comment-textarea flex-center"},[e("v-uni-textarea",{staticClass:"comment-textarea-input",attrs:{"cursor-spacing":3e3,"auto-height":!0,fixed:!0,placeholder:"请输入内容",cursor:t.cursor,"show-confirm-bar":!1,focus:t.focus,disabled:t.polocked,"adjust-position":!0},model:{value:t.content,callback:function(a){t.content=a},expression:"content"}}),e("v-uni-view",{staticClass:"submit"},[e("v-uni-button",{staticClass:"sub-button fs14 bold b2color",attrs:{disabled:t.polocked,size:"mini"},on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.submit.apply(void 0,arguments)}}},[t._v("发布")])],1)],1)],1)},i=[]},f235:function(t,a,e){"use strict";var n=e("1acf"),i=e.n(n);i.a}}]);